=================================================================
ğŸ“Š INSTRUÃ‡Ã•ES PARA IMPORTAÃ‡ÃƒO DE HISTÃ“RICO DE ESTOQUE
=================================================================

## ğŸ“‹ FORMATO DO ARQUIVO CSV

O arquivo CSV deve ter as seguintes colunas (exatamente nesta ordem):

1. data_contagem     - Data da contagem no formato YYYY-MM-DD (ex: 2025-11-01)
2. insumo_codigo     - CÃ³digo do insumo cadastrado (ex: i0093, i0228)
3. estoque_final     - Quantidade em estoque no final do dia (nÃºmero decimal)
4. quantidade_pedido - Quantidade comprada/recebida no dia (opcional, padrÃ£o: 0)
5. observacoes       - ObservaÃ§Ãµes adicionais (opcional)

## ğŸ“ EXEMPLO DE ARQUIVO CSV

```csv
data_contagem,insumo_codigo,estoque_final,quantidade_pedido,observacoes
2025-11-01,i0093,5.5,10.0,Compra da semana
2025-11-01,i0097,3.2,5.0,
2025-11-01,i0228,15.8,20.0,
2025-11-02,i0093,4.1,0,Consumo normal
2025-11-02,i0097,2.8,0,
2025-11-02,i0228,12.5,0,
```

## ğŸš€ COMO USAR

### 1. Preparar o arquivo CSV

- Exporte os dados da planilha Excel/Google Sheets como CSV
- Certifique-se de que as colunas estÃ£o na ordem correta
- Use vÃ­rgula (,) como separador
- Datas devem estar no formato YYYY-MM-DD

### 2. Executar o script

**Com servidor local (localhost:3000):**
```bash
node exemplo_teste/importar-historico-estoque.js seu-arquivo.csv
```

**Com servidor de produÃ§Ã£o:**
```bash
node exemplo_teste/importar-historico-estoque.js seu-arquivo.csv https://zykor.vercel.app
```

## ğŸ“Š PROCESSAMENTO

O script irÃ¡:
1. âœ… Ler o arquivo CSV
2. âœ… Agrupar os registros por data
3. âœ… Processar as datas em ordem cronolÃ³gica
4. âœ… Buscar o insumo pelo cÃ³digo
5. âœ… Criar/atualizar a contagem no sistema
6. âœ… Calcular automaticamente:
   - estoque_inicial (estoque_final do dia anterior)
   - consumo_periodo (estoque_inicial + pedido - estoque_final)
   - valor_consumo (consumo * custo_unitario)

## âš ï¸ IMPORTANTE

- Os cÃ³digos dos insumos devem existir no sistema
- Caso o cÃ³digo nÃ£o seja encontrado, o registro serÃ¡ pulado
- Contagens duplicadas (mesma data + insumo) serÃ£o atualizadas
- O script processa em lotes de 5 para nÃ£o sobrecarregar a API

## ğŸ“ˆ RESULTADO

Ao final, vocÃª verÃ¡ um resumo:
```
ğŸ“Š RESUMO DA IMPORTAÃ‡ÃƒO
============================================================
âœ… Sucesso: 182
âŒ Erros: 3
ğŸ“¦ Total: 185
ğŸ“… Datas processadas: 15

âŒ Registros com erro:
   - i9999: Insumo nÃ£o encontrado (3x)

âœ… ImportaÃ§Ã£o concluÃ­da!
```

## ğŸ’¡ DICAS

1. **ComeÃ§e com um arquivo pequeno** para testar
2. **Verifique os cÃ³digos** antes de importar tudo
3. **Mantenha backup** do arquivo original
4. **Importe em ordem cronolÃ³gica** (o script jÃ¡ faz isso automaticamente)
5. **Use o arquivo exemplo** como referÃªncia

## ğŸ”„ CONVERTENDO PLANILHA EXCEL

Se vocÃª tem os dados em Excel:

1. Abra o Excel
2. Organize as colunas na ordem correta
3. Arquivo â†’ Salvar Como â†’ CSV (Delimitado por vÃ­rgulas)
4. Escolha UTF-8 como encoding
5. Execute o script

## ğŸ“ SUPORTE

Em caso de dÃºvidas ou erros, verifique:
- âœ… Servidor estÃ¡ rodando (localhost:3000 ou produÃ§Ã£o)
- âœ… CÃ³digos dos insumos estÃ£o corretos
- âœ… Formato de data estÃ¡ correto (YYYY-MM-DD)
- âœ… NÃºmeros usam ponto (.) como separador decimal
- âœ… Arquivo estÃ¡ em UTF-8

=================================================================

